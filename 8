#include<stdio.h>
 #include<string.h>
 #define max 1000 
 void main()
 {
 char src[max],dst[max],newdst[max]; 
 char flagbyte[]="01111110"; 
 int si=0,di=0,ni=0,ndi=0,count=0,newcount=0;
 printf("enter the data\n");
 scanf("%s",src);
 strcpy(dst,flagbyte);
 di=strlen(flagbyte);
 //-----stuffing of data------
while(src[si]!='\n') 
 {
 if(src[si]=='1') 
 count++;
 else
 count=0;
 dst[di++]=src[si++];
 if(count==5) 
 {
 dst[di++]='0';
 count=0;
 }
 }
 dst[di]='\0';
 strcat(dst,flagbyte); 
 printf("stuffed data=%s\n",dst);
 //------De-stuffing of data
 ni=strlen(dst);
 di=strlen(flagbyte);
 while(di<(ni-8))
 {
 if(dst[di]=='1')
 newcount++;
 else
 newcount=0;
 newdst[ndi++]=dst[di++];
 if(newcount==5) 
 { di++;
 newcount=0;
 }
}
 newdst[ndi]='\0';
 printf("de stuff data=%s\n",newdst);
 }
#include<stdio.h>
 #include<string.h>
 #define max 1000
 void main()
 {
 char src[max],dst[max],newdst[max];
 char begin[]="DLE_STX",end[]="DLE_ETX";
 int si=0,di=0,ndi=0,ni=0,r=0;
 printf("enter data\n");
 scanf("%s",src);
 strcpy(dst,begin);
 di=strlen(begin);
 //-----stuffing of data------
 while(src[si]!='\0')
 {
 if(src[si]=='D' && src[si+1]=='L' && src[si+2]=='E')
 {
 dst[di]='D';
 dst[di+1]='L'; 
 dst[di+2]='E';
 dst[di+3]='D';
 dst[di+4]='L';
 dst[di+5]='E';
 di=di+6;
 si=si+3;
 }
 else
 {
 dst[di++]=src[si++];
 }
 }
 dst[di]='\0';
 strcat(dst,end);
 printf("\nstuffed data is\n %s",dst);
 ni=strlen(dst);
 di=strlen(begin);
 r=strlen(end);
 while(di<(ni-r))
 {
 newdst[ndi++]=dst[di++];
 if(dst[di]=='D' && dst[di+1]=='L' && dst[di+2]=='E')
 di=di+3;
 }
newdst[ndi]='\0';
 printf("\ndestuffed data is\n %s",newdst);
 }
